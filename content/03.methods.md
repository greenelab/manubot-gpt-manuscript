# Methods

We implemented the AI-based revision infrastructure using Manubot [@doi:10.1371/journal.pcbi.1007128].
This software takes Markdown as input and produces HTML, PDF, or other formats supported by pandoc as output.
It also has a robust infrastructure for citing by persistent identifiers.
Its workflows are handled by continuous integration software such as Appveyor and GitHub Actions, and most of them run with each commit.

We used the OpenAI API to access large language models, focusing on completion endpoints.
This API has a cost associated with each run, which depends on the length of the manuscript.
To keep costs low, we implemented our workflow in GitHub actions, allowing the user to trigger it.
The user can also select the model they wish to use, which helps to control the cost.
For example, when using the most complex model, 'text-davinci-003', the cost per run is usually less than $0.50 for most manuscripts.

When the user initiates the process, the manuscript is broken down into sections and paragraphs, which are then processed by the model along with custom prompts.
The output is then formatted and returned to the user.
Our workflow uses the GitHub API to create a new pull request, so the user can review and edit the output before merging it.
This is important in case future legal rulings change the copyright status of outputs from generative models.
