# Methods

For example, the PDF workflow uses pandoc to convert the Markdown to PDF, and the HTML workflow uses pandoc to convert the Markdown to HTML.

We implemented the AI-assisted revision infrastructure in Manubot [@doi:10.1371/journal.pcbi.1007128], which takes Markdown as input and produces HTML, PDF, or other formats supported by pandoc as output.
This system features a robust cite-by-persistent-identifier infrastructure.
Its workflows are implemented in continuous integration software, such as Appveyor and GitHub Actions, and most of them are run with each commit.
For instance, the PDF workflow uses pandoc to convert the Markdown to PDF, and the HTML workflow uses pandoc to convert the Markdown to HTML.

We used the OpenAI API to access large language models, focusing on completion endpoints.
This API incurs a cost for each run, which depends on the length of the manuscript.
To reduce costs, we implemented our workflow in GitHub actions, making it triggerable by the user.
The user can select the model they wish to use, allowing them to adjust the cost.
For example, the most complex model, `text-davinci-003`, incurs a cost of less than $0.50 per run for many manuscripts.

When the user triggers the action, the manuscript is parsed by section and then by paragraph.
The model is then passed the parsed text along with a set of custom prompts.
The output is then reformatted and returned to the user.
Our workflow uses the GitHub API to generate a new pull request, allowing the user to review and, if desired, modify the output before merging.
This workflow allows the user to attribute text either to themselves or to the language model.
This may be important in the event that future legal decisions change the copyright landscape around the outputs of generative models [@doi:10.1038/s41562-019-0718-3].
